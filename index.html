<!DOCTYPE>
<html>

<head>
    <style>
    table {
        width:80%;
    }
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
    }
    td{
    width:20px;
    height: 70px
    
    }

    .whitec {
        background: url(./whitec.png);
        background-repeat: no-repeat;
        text-align: center; 
        background-size: 80px 70px;
    }

    .blackc {
        background: url(./blackc.png);
        background-repeat: no-repeat;
        text-align: center; 
        background-size: 80px 70px;
    }
    </style>
</head>


<body>

<table>
  <tr>
   <td ></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
  </tr>
  <tr>
     <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  <tr>
   <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
  <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
    <tr>
      <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
     <td></td>		
    <td></td>
       <td></td>
  </tr>
  
</table>

<div style="position: absolute; top: 0px; right: 20px">
    <button onClick="undo()">悔棋</button>
    <button onclick="redo()">撤銷悔棋</button>
</div>


</div>
  

  <script>
    var flag = true;//白子  
    var tmp,tmpColor;
    document.querySelectorAll('td').forEach((d, idx) => {
      d.setAttribute('id', idx);
      d.addEventListener('click', (e) => {
        tmp = e.target.id;
        if(e.target.getAttribute('class')) {
            alert('此處已經下過旗子');
            return
        }
        if(flag) {
          e.target.setAttribute('class', 'blackc');
          flag = false;
          checkBingo(parseInt(e.target.id), 'blackc')
        } else {
          e.target.setAttribute('class', 'whitec');
          flag = true;
          checkBingo(parseInt(e.target.id), 'whitec')
        }
        
      })
    })

function undo() {
  tmpColor = document.getElementById(tmp).getAttribute('class');
  document.getElementById(tmp).setAttribute('class', '');
  flag = !flag;
}

function redo() {
  document.getElementById(tmp).setAttribute('class', tmpColor);
  flag = !flag;
}


function checkBingo(targetID, color) {
      
if(document.getElementById(targetID - 11).getAttribute('class')  === color) {
  if(document.getElementById(targetID - 22).getAttribute('class') === color) {
    if(document.getElementById(targetID - 33).getAttribute('class') === color) {
      if(document.getElementById(targetID - 44).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID - 10).getAttribute('class') === color) {
  if(document.getElementById(targetID - 20).getAttribute('class') === color) {
    if(document.getElementById(targetID - 30).getAttribute('class') === color) {
      if(document.getElementById(targetID - 40).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID - 9).getAttribute('class') === color) {
  if(document.getElementById(targetID - 18).getAttribute('class') === color) {
    if(document.getElementById(targetID - 27).getAttribute('class') === color) {
      if(document.getElementById(targetID - 36).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID - 1).getAttribute('class') === color) {
  if(document.getElementById(targetID - 2).getAttribute('class') === color) {
    if(document.getElementById(targetID - 3).getAttribute('class') === color) {
      if(document.getElementById(targetID - 4).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID + 1).getAttribute('class') === color) {
  if(document.getElementById(targetID + 2).getAttribute('class') === color) {
    if(document.getElementById(targetID + 3).getAttribute('class') === color) {
      if(document.getElementById(targetID + 4).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}



if(document.getElementById(targetID + 11).getAttribute('class') === color) {
  if(document.getElementById(targetID + 22).getAttribute('class') === color) {
    if(document.getElementById(targetID + 33).getAttribute('class') === color) {
      if(document.getElementById(targetID + 44).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID + 10).getAttribute('class') === color) {
  if(document.getElementById(targetID + 20).getAttribute('class') === color) {
    if(document.getElementById(targetID + 30).getAttribute('class') === color) {
      if(document.getElementById(targetID + 40).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

if(document.getElementById(targetID + 9).getAttribute('class') === color) {
  if(document.getElementById(targetID + 18).getAttribute('class') === color) {
    if(document.getElementById(targetID + 27).getAttribute('class') === color) {
      if(document.getElementById(targetID + 36).getAttribute('class') === color) {
        if(color === 'whitec'){
          alert('白色勝利')
        } else {
          alert('黑色勝利')  
        }
      }
    }
  }
}

    }
  </script>
</html>